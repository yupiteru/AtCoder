# 競プロ環境
自分用の競プロ環境です。<br>
主に AtCoder で使用しています。<br>
※ツール類は Windows 環境でのみ動作を確認しています。

## 主要なファイルの一覧
| 名称 | 内容 |
| --- | --- |
| lib | ライブラリ |
| problems | 問題を解くときに使用する作業ディレクトリ |
| template | ソーステンプレート |
| copy.pl | ソースとライブラリを提出用に1ファイルにまとめるスクリプト |
| setup.pl | ソーステンプレートをコピーして problems 配下に展開します |
| setupContest.pl | 指定した AtCoder のコンテスト用の準備を行う |

## ローカルテストについて
`problems` ディレクトリ配下に以下のファイルがあるとします。
- ProblemA.cs
- ProblemA_TestCase.txt

Program.cs の Main クラスをそのまま実行すると、テストケースファイル（`ProblemA_TestCase.txt`）に保存されている入力を `ProblemA.cs` で試し、出力を比較します。<br>
※テストケースファイルには以下のような形式で入力と出力の組が保存されている前提

#### テストケースファイルの内容例
```
[case 1]
sample input 1

[output]
sample output 1

[case 2]
3 2
ABC

[output]
CDE
```

## ライブラリについて
クラス名と一部のメソッド名には接頭辞 `LIB_` が付与されています。<br>
※ツール（copy.pl）で扱いやすくするため

## ツール類
### copy.pl
#### 起動方法
`copy.pl <ファルパス>`
#### 説明
ファイルパスで指定されたソースファイルと、ソース内で使用されているライブラリを結合します。<br>
接頭辞 `LIB_` で始まる文字列をソースから抽出し、lib ディレクトリ配下から対応するソースを持ってきて `Library` 名前空間内に貼り付けていく動作になります。

### setup.pl
#### 起動方法
`setup.pl <英大文字>`
#### 説明
`template` 配下のファイルをソースのテンプレートとして、それを元に `problems` ディレクトリ配下にコピーしていきます。<br>
クラス名は `ProblemA` のような形式で、末尾の英大文字部分が `A ～ 引数で指定された文字` の分までコピーされます。<br>

### setupContest.pl
#### 起動方法
`setupContest.pl <コンテストID> [--server]`
#### 説明
コンテストIDは、AtCoder のコンテストトップページのURLの末尾を指します。<br>
例) `https://atcoder.jp/contests/abc329` の `abc329` 部分<br>
<br>
指定したコンテストの各問題ページから入出力例を取得し、`problems` ディレクトリ配下に問題別にソースとテストケースファイルを作成します。

#### 実行準備
`setupContestProperty.txt` に AtCoder のユーザIDとパスワードを保存しておく。<br>
誤ってパスワードをコミットしないよう、以下 git コマンドを実行してこのファイルの差分を検知しないようにしておくと良い。<br>
`git update-index --skip-worktree setupContestProperty.txt`

#### --server 指定時の動作
コンテストにリアルタイム参加する場合のみ有効です。<br>
実行するとコンテスト開始まで待機し、開始直後に問題ページから入出力例を取得して上記と同じ動作になります。<br>
その後はコンテスト終了までの間 `submit.txt` の追記を監視しており、ソースのファイルパスが追記されたらそのソースを自動で提出する動作になります。

## 使用例
### AtCoder Beginner Contest 329 にリアルタイム参加するケース
1. コンテスト前に `setupContest.pl abc329 --server` を実行する
   - problems 配下に ProblemA.cs ～ ProblemG.cs までソースファイルが作成されます。
1. （コンテスト開始時に自動で以下処理が動く）
   - 各問題のページから入出力例を取得して ProblemA_TestCase.txt のようなファイル名で保存されます。
1. submit.txt の最終行に提出するソースのファイルパスを追記する
   - ソースに対応した問題に対して自動提出されます。
   - ※ ファイルパスの追記動作は VSCode 側でショートカットキーに割り当てている

### AtCoder 以外のコンテストに参加するケース
1. コンテスト前に `setup.pl F` を実行する
   - problems 配下に ProblemA.cs ～ ProblemF.cs までソースファイルが作成されます。
1. 問題ごとに入出力例がある場合はテストケースファイルに追記
   - 各問題のテストケースが ProblemA_TestCase.txt のようなファイル名で作成されているので、そこに入出力例を追記する。
1. `copy.pl {ファイルパス}` を実行する
   - ソースと使用したライブラリをひとつにまとめて、その内容がクリップボードにコピーされます。そのままコンテストサイトから提出するなど。
   - ※ copy.pl の呼び出しは VSCode 側でショートカットキーに割り当てている
